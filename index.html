<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Live Data Fed Attack Map by joshftx</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Live Data Fed Attack Map</h1>
        <h2>Live Data Fed Attack Map</h2>
        <a href="https://github.com/joshftx/maps" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          
<iframe width="640" height="480" src="https://www.youtube.com/embed/q0JINtvdo_k" frameborder="0" allowfullscreen></iframe>
          
                  <iframe width="640" height="480"
src="http://www.youtube.com/embed/Ja2OH2pdv_c?autoplay=1">
</iframe>

<p>This project is based on the pewpew attack map project: <a href="https://github.com/hrbrmstr/pewpew">https://github.com/hrbrmstr/pewpew</a></p>

<p>I liked it so much, but really wanted to see my own live data on there. I saw that they had added some custom support for MHN honeypot through some web sockets.  I decided to learn a little node.js and built a node app which serves up the map web page and provides a listener which listens on UDP 514 for any incoming messages. It looks for IP addresses in the message, does a quick ip-geo lookup, and passes the coordinates to the web page, where your browser draws the arcs. You can configure anything you want to forward syslog messages to port 514.  Its still a little buggy, but works for the most part.</p>

<p>For this project, since all the destinations were at my datacenter, the destination is the same for every hit. You can adjust that destination by modifying mylat and mylong in public/index.html.
You will also need to get a free API key from <a href="http://www.ipinfodb.com/">http://www.ipinfodb.com/</a>. Make sure to throttle your source so you don't overload their servers and go over the free limit.  A good future enhancement would be buffering of input requests and caching of results. Place this key at the top of geolistener.js.</p>

<p>To get it started:</p>

<p>node geolistener.js</p>

<p>This will start a webserver on port 3000, which servers up the index.html located in public. It also starts the syslog listener on port 514. Make sure your firewall allows inbound UDP to 514, and if you have any local firewall running on your node server, you'll need to allow it to listen on 3000.</p>

<p>You can check mine out here: <a href="http://gamehenge.duckdns.org:3000">http://gamehenge.duckdns.org:3000</a></p>

<p>The required node modules are:
d3, 
express, 
socket.io,
request</p>

<p>In the test folder, there's a Powershell script you can use which will parse a CSV file and send the IP's to your listener.</p>
<p>Otherwise you can test with netcat like this:</p>
<p>echo -n "8.8.8.8"|nc -4u -w1 127.0.0.1 514 </p>



        </section>
        


        <aside id="sidebar">
          <a href="https://github.com/joshftx/maps/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/joshftx/maps/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/joshftx/maps"></a> is maintained by <a href="https://github.com/joshftx">joshftx</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-83867577-1', 'auto');
        ga('send', 'pageview');
      
      </script>
  
  </body>
</html>
